# ==========================================================================
# General Playback & Video Output
# ==========================================================================
save-position-on-quit
vo=gpu
gpu-api=vulkan

# Use 'auto' to intelligently select the best hardware decoder.
# On your system, this will default to 'qsv'. This is more robust.
hwdec=auto

# ==========================================================================
# Subtitles & Audio
# ==========================================================================
slang=vn,vie
alang=jpn,jp,eng,en,enUS,en-US,de,ger
sub-auto=fuzzy
embeddedfonts=yes
blend-subtitles=no

# Keep for compatibility with older subtitle formats
sub-ass-use-video-data=all
sub-ass-scale-with-window=no

# Personal preference, 1 is a good default
sub-border-size=1

# Auto-load external audio files with similar names
audio-file-auto=fuzzy

# ==========================================================================
# OSD & Window
# ==========================================================================
osd-playing-msg='${media-title}'
autofit=85%x85%

# ==========================================================================
# Quality & Performance (Optimized for Intel iGPU)
# ==========================================================================
# This is a balanced profile for high quality without overtaxing your iGPU.
# It avoids the overly demanding 'gpu-hq' preset.

# Scaling: A much more efficient but still high-quality scaler setup.
# 'scaleway-bicubic' is a sharp and fast algorithm.
# 'mitchell' is a clean, non-ringing downscaler.
scale=scaleway-bicubic
dscale=mitchell
cscale=scaleway-bicubic

# These options from your original config are good for quality.
correct-downscaling=yes
sigmoid-upscaling=yes
linear-downscaling=no

# Debanding: Reduced intensity for better performance.
# This will still remove banding effectively in most cases without wasting resources.
deband=yes
deband-iterations=1
deband-threshold=40

# Dithering is important for preventing color banding.
dither=error-diffusion

# Video synchronization
video-sync=display-resample

# HDR to SDR tone mapping
hdr-compute-peak=yes
tone-mapping=mobius

# ==========================================================================
# Caching (More Reasonable Values)
# ==========================================================================
# These settings provide good buffering without excessive RAM usage.
cache=yes
demuxer-max-bytes=350MiB
demuxer-readahead-secs=200

[protocol.http]
profile=protocol-network

[protocol.https]
profile=protocol-network

[protocol-network]
hls-bitrate=max
# Use the general cache settings defined above.
